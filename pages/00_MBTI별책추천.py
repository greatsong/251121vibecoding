import streamlit as st

# 페이지 기본 설정
st.set_page_config(
    page_title="MBTI 고전 책 추천",
    page_icon="📚",
    layout="wide",
)

# ------------------------
# 데이터: MBTI별 고전 추천
# ------------------------
mbti_descriptions = {
    "INTJ": "통찰력 있는 전략가, 깊이 있는 사유와 큰 그림을 좋아해요. 🧠",
    "INTP": "호기심 많은 분석가, 개념과 아이디어를 파고드는 타입이에요. 🔍",
    "ENTJ": "당당한 리더형, 구조와 시스템을 보는 눈이 뛰어나요. 🏗️",
    "ENTP": "아이디어 스파크형, 토론과 새로운 관점을 즐겨요. ⚡",

    "INFJ": "통찰력 있는 조언자, 사람과 세상을 깊이 이해하려고 해요. 🌌",
    "INFP": "이상주의적인 꿈꾸는 자, 가치와 의미를 무엇보다 중시해요. 🌈",
    "ENFJ": "따뜻한 리더, 사람을 이끄는 힘과 공감 능력이 뛰어나요. 🤝",
    "ENFP": "에너지 넘치는 탐험가, 자유로운 상상과 관계를 즐겨요. ✨",

    "ISTJ": "꼼꼼한 관리자, 책임감과 성실함이 몸에 밴 타입이에요. 📏",
    "ISFJ": "다정한 보호자, 주변 사람을 세심하게 챙겨요. 🫶",
    "ESTJ": "실무형 리더, 현실 감각과 실행력이 뛰어나요. 📌",
    "ESFJ": "분위기 메이커, 조화와 배려를 중요하게 생각해요. 🎀",

    "ISTP": "조용한 해결사, 손으로 직접 다뤄보며 배우는 타입이에요. 🛠️",
    "ISFP": "감성적인 예술가, 순간의 감정과 아름다움을 소중히 여겨요. 🎨",
    "ESTP": "액션 플레이어, 몸으로 부딪히며 경험을 쌓는 타입이에요. 🏃",
    "ESFP": "무대 위의 주인공, 즐거움과 사람을 사랑하는 타입이에요. 🎉",
}

recommendations = {
    "INTJ": [
        {
            "title": "1984",
            "author": "조지 오웰",
            "emoji": "🧠",
            "reason": "권력과 감시, 전체주의를 다룬 디스토피아 소설로, "
                      "사회 구조와 시스템을 비판적으로 분석하는 INTJ에게 딱 어울려요."
        },
        {
            "title": "군주론",
            "author": "니콜로 마키아벨리",
            "emoji": "🏰",
            "reason": "냉철한 현실 정치와 권력 전략을 다루어, "
                      "전략적 사고를 즐기는 INTJ의 지적 호기심을 자극해요."
        },
    ],
    "INTP": [
        {
            "title": "소피의 세계",
            "author": "요슈타인 가아더",
            "emoji": "🌀",
            "reason": "철학사의 핵심 개념을 스토리로 풀어줘서, 개념 탐구를 좋아하는 INTP에게 잘 맞는 입문 고전이에요."
        },
        {
            "title": "변신",
            "author": "프란츠 카프카",
            "emoji": "🪲",
            "reason": "부조리와 존재에 대한 질문이 가득한 작품으로, "
                      "‘이건 왜 이렇게 된 거지?’를 파고드는 INTP의 분석 본능을 자극해요."
        },
    ],
    "ENTJ": [
        {
            "title": "국가",
            "author": "플라톤",
            "emoji": "🏛️",
            "reason": "이상 국가와 정의를 논하는 대화체 철학서로, "
                      "조직과 사회의 구조를 고민하는 ENTJ에게 좋은 사고 실험이 돼요."
        },
        {
            "title": "손자병법",
            "author": "손무",
            "emoji": "⚔️",
            "reason": "전략·전술의 정석을 담고 있어, 목표 지향적인 ENTJ가 "
                      "‘플랜 세우기’를 좋아하는 성향과 잘 어울려요."
        },
    ],
    "ENTP": [
        {
            "title": "동물 농장",
            "author": "조지 오웰",
            "emoji": "🐷",
            "reason": "우화 형식을 빌려 권력과 혁명을 풍자하는 작품으로, "
                      "여러 관점을 동시에 가지고 노는 ENTP의 토론 욕구를 자극해요."
        },
        {
            "title": "돈키호테",
            "author": "세르반테스",
            "emoji": "🗡️",
            "reason": "현실과 이상 사이를 오가는 주인공의 모험담이, "
                      "상상력 풍부한 ENTP에게 ‘미친 상상도 의미 있다!’는 위로를 줘요."
        },
    ],
    "INFJ": [
        {
            "title": "데미안",
            "author": "헤르만 헤세",
            "emoji": "🌒",
            "reason": "자기 발견과 성장에 대한 이야기로, "
                      "내면의 세계를 깊게 탐구하는 INFJ에게 큰 공감을 주는 작품이에요."
        },
        {
            "title": "참을 수 없는 존재의 가벼움",
            "author": "밀란 쿤데라",
            "emoji": "🌌",
            "reason": "삶의 의미와 존재의 무게를 철학적으로 탐구해, "
                      "사유를 즐기는 INFJ에게 사려 깊은 질문을 던져줘요."
        },
    ],
    "INFP": [
        {
            "title": "어린 왕자",
            "author": "생텍쥐페리",
            "emoji": "🦊",
            "reason": "순수함과 관계, 사랑의 본질을 다루는 이야기로, "
                      "가치를 중시하는 INFP의 마음을 따뜻하게 어루만져 줘요."
        },
        {
            "title": "안네의 일기",
            "author": "안네 프랑크",
            "emoji": "📖",
            "reason": "전쟁 속에서도 희망과 인간다움을 지키려는 소녀의 기록으로, "
                      "INFP의 공감 능력을 깊이 자극하는 작품이에요."
        },
    ],
    "ENFJ": [
        {
            "title": "죄와 벌",
            "author": "도스토옙스키",
            "emoji": "⚖️",
            "reason": "죄책감, 구원, 도덕적 갈등을 다루며, "
                      "사람의 내면과 변화를 중요하게 보는 ENFJ에게 깊은 울림을 줘요."
        },
        {
            "title": "작은 아씨들",
            "author": "루이자 메이 올컷",
            "emoji": "👧",
            "reason": "가족과 꿈, 성장의 이야기가 담겨 있어, "
                      "타인을 응원하는 ENFJ의 따뜻한 리더십과 잘 어울려요."
        },
    ],
    "ENFP": [
        {
            "title": "이상한 나라의 앨리스",
            "author": "루이스 캐럴",
            "emoji": "🐇",
            "reason": "상상력 넘치는 세계관과 비틀린 논리가, "
                      "자유로운 ENFP의 호기심을 끝없이 자극해요."
        },
        {
            "title": "호밀밭의 파수꾼",
            "author": "J.D. 샐린저",
            "emoji": "🌾",
            "reason": "진짜 ‘나’와 어른들의 세계 사이에서 방황하는 주인공의 이야기가, "
                      "감정에 진심인 ENFP에게 크게 와닿을 수 있어요."
        },
    ],
    "ISTJ": [
        {
            "title": "삼국지",
            "author": "나관중",
            "emoji": "🧱",
            "reason": "치밀한 전개와 전략, 인물 관계가 촘촘히 짜여 있어, "
                      "논리와 구조를 중시하는 ISTJ가 차근차근 파고들기 좋은 작품이에요."
        },
        {
            "title": "홍길동전",
            "author": "허균",
            "emoji": "⚖️",
            "reason": "질서와 불의, 이상적 정의를 고민하게 해 주는 고전으로, "
                      "원칙을 중시하는 ISTJ에게 흥미로운 대비를 줘요."
        },
    ],
    "ISFJ": [
        {
            "title": "작은 아씨들",
            "author": "루이자 메이 올컷",
            "emoji": "🏡",
            "reason": "가족과 일상의 소중함을 담은 이야기로, "
                      "배려심 많은 ISFJ의 마음을 포근하게 감싸줘요."
        },
        {
            "title": "소나기",
            "author": "황순원",
            "emoji": "🌧️",
            "reason": "첫사랑의 순수함과 여운이 짙은 한국 단편 고전으로, "
                      "섬세한 감정을 가진 ISFJ에게 잔잔한 울림을 줘요."
        },
    ],
    "ESTJ": [
        {
            "title": "레미제라블",
            "author": "빅토르 위고",
            "emoji": "⚖️",
            "reason": "법과 정의, 혁명과 질서의 문제를 다루어, "
                      "현실적인 시각을 가진 ESTJ가 사회 구조를 함께 고민해 보기 좋아요."
        },
        {
            "title": "토지",
            "author": "박경리",
            "emoji": "🌾",
            "reason": "방대한 인물과 시대를 다루는 대하소설로, "
                      "끈기 있게 읽으며 ‘역사와 삶’을 분석하기에 좋은 작품이에요."
        },
    ],
    "ESFJ": [
        {
            "title": "오만과 편견",
            "author": "제인 오스틴",
            "emoji": "💐",
            "reason": "사람 사이의 관계, 오해와 성장 이야기가 중심이라, "
                      "대인 관계에 밝은 ESFJ에게 딱 맞는 로맨스 고전이에요."
        },
        {
            "title": "플랜더스의 개",
            "author": "위다",
            "emoji": "🐶",
            "reason": "헌신과 우정, 순수함을 그린 이야기로, "
                      "정 많은 ESFJ의 공감 버튼을 강하게 누를 수 있어요."
        },
    ],
    "ISTP": [
        {
            "title": "로빈슨 크루소",
            "author": "다니엘 디포",
            "emoji": "🏝️",
            "reason": "무인도에서 살아남는 실전 생존기라, "
                      "직접 해결하고 만드는 걸 좋아하는 ISTP에게 잘 맞는 모험담이에요."
        },
        {
            "title": "해저 2만 리",
            "author": "쥘 베른",
            "emoji": "🌊",
            "reason": "기계와 탐험, 미지의 세계가 등장해, "
                      "호기심 많은 ISTP의 탐험 욕구를 채워줘요."
        },
    ],
    "ISFP": [
        {
            "title": "나무",
            "author": "베르나르 베르베르",
            "emoji": "🌳",
            "reason": "자연과 생명을 주제로 한 상상력이 풍부한 이야기로, "
                      "감성적인 ISFP의 감수성과 잘 어울려요."
        },
        {
            "title": "폭풍의 언덕",
            "author": "에밀리 브론테",
            "emoji": "🌪️",
            "reason": "격정적인 감정과 풍경이 함께 어우러져, "
                      "감정의 깊이를 중요하게 보는 ISFP에게 인상적인 작품이에요."
        },
    ],
    "ESTP": [
        {
            "title": "삼총사",
            "author": "알렉상드르 뒤마",
            "emoji": "🗡️",
            "reason": "모험, 액션, 우정이 가득한 빠른 전개가, "
                      "액션을 사랑하는 ESTP의 흥미를 제대로 끌어줘요."
        },
        {
            "title": "노인과 바다",
            "author": "어니스트 헤밍웨이",
            "emoji": "🌊",
            "reason": "바다와의 사투를 그린 짧고 강렬한 이야기로, "
                      "도전 정신 강한 ESTP에게 깊은 여운을 남길 수 있어요."
        },
    ],
    "ESFP": [
        {
            "title": "위대한 개츠비",
            "author": "F. 스콧 피츠제럴드",
            "emoji": "🎇",
            "reason": "화려한 파티와 사랑, 허무함이 공존하는 이야기로, "
                      "분위기와 감정을 즐기는 ESFP에게 매력적인 작품이에요."
        },
        {
            "title": "로미오와 줄리엣",
            "author": "셰익스피어",
            "emoji": "🎭",
            "reason": "극적인 감정의 소용돌이가 가득한 고전 로맨스로, "
                      "감정 표현이 풍부한 ESFP에게 잘 어울려요."
        },
    ],
}

all_types = list(mbti_descriptions.keys())

# ------------------------
# 사이드바: MBTI 선택
# ------------------------
with st.sidebar:
    st.markdown("## 🔍 MBTI 선택")
    st.write("학생(또는 본인)의 MBTI를 선택하면,\n그 성향에 어울리는 **고전 책**을 추천해 줄게요! 📚")
    selected_mbti = st.selectbox("MBTI 유형을 골라주세요", options=all_types, index=all_types.index("INFP"))
    st.markdown("---")
    st.markdown("💡 *Tip*: 수업에서 아이들끼리\nMBTI별 독서 모임을 만들어도 재밌어요!")

# ------------------------
# 메인 영역
# ------------------------
st.markdown("# 📚 MBTI 고전 책 추천 웹앱")
st.markdown("학생의 **성격 유형**과 잘 맞는 고전을 골라주는 작은 독서 큐레이션 서비스예요. ✨")

# 선택된 MBTI 정보
st.markdown(f"## {selected_mbti} 타입을 위한 추천 리스트")
st.markdown(f"**성향 한 줄 소개:** {mbti_descriptions.get(selected_mbti, '')}")

st.markdown("### ✨ 오늘의 고전 추천")

cols = st.columns(2)

for i, book in enumerate(recommendations[selected_mbti]):
    with cols[i % 2]:
        st.markdown(
            f"""
            #### {book['emoji']} *{book['title']}*
            **저자**: {book['author']}  
            {book['reason']}
            """.strip()
        )
        st.markdown("---")

# 아래에 작은 한 줄 응원 멘트
st.markdown(
    "📖 **한 줄 응원:** 오늘 딱 한 챕터만 읽어도, 어제의 나보다 조금 더 깊어진 자신을 만날 수 있어요. 🌱"
)
